(()=>{var t={n:o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return t.d(a,{a}),a},d:(o,a)=>{for(var e in a)t.o(a,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:a[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o),t.d(o,{extend:()=>x});const a=flarum.core.compat["common/app"];t.n(a)().initializers.add("ianm/twofactor",(function(){}));const e=flarum.core.compat["admin/app"];var r=t.n(e);const n=flarum.core.compat["common/extend"],i=flarum.core.compat["admin/components/UserListPage"];var s=t.n(i);const c=flarum.core.compat["common/helpers/icon"];var l=t.n(c);const u=flarum.core.compat["admin/components/EditGroupModal"];var d=t.n(u);const p=flarum.core.compat["common/components/Switch"];var f=t.n(p);const b=flarum.core.compat["common/utils/Stream"];var g=t.n(b);const h=flarum.core.compat["common/models/Group"];var w=t.n(h);const _=flarum.core.compat["common/extenders"];var v=t.n(_);const F=flarum.core.compat["common/models/User"];var y=t.n(F);const A=[new(v().Model)(y()).attribute("twoFactorEnabled").attribute("canDisable2FA").attribute("mustEnable2FA").attribute("backupCodesRemaining"),new(v().Model)(w()).attribute("requires2FA")],x=[].concat(A);r().initializers.add("ianm/twofactor",(function(){r().extensionData.for("ianm-twofactor").registerPermission({icon:"fas fa-shield-alt",label:r().translator.trans("ianm-twofactor.admin.permissions.see_two_factor_status_label"),permission:"ianm-twofactor.seeTwoFactorStatus"},"moderate",65).registerPermission({icon:"fas fa-shield-alt",label:r().translator.trans("ianm-twofactor.admin.permissions.manage_others_label"),permission:"ianm-twofactor.manageOthers"},"moderate",60),(0,n.extend)(s().prototype,"columns",(function(t){t.add("2fa",{name:"2FA",content:function(t){return t.twoFactorEnabled()?m("p",null,l()("fas fa-shield-alt")):m("p",null)}},82)})),(0,n.extend)(d().prototype,"oninit",(function(t){this.requires2FA=g()(this.group.requires2FA()||!1)})),(0,n.extend)(d().prototype,"fields",(function(t){t.add("2fa",m("div",{className:"Form-group"},this.group.id()===w().ADMINISTRATOR_ID?m("p",null,r().translator.trans("ianm-twofactor.admin.edit_group.admin_2fa_help",{adminName:this.group.nameSingular()})):m(f(),{state:this.requires2FA(),onchange:this.requires2FA},r().translator.trans("ianm-twofactor.admin.edit_group.2fa_label")),m("p",{className:"helpText"},r().translator.trans("ianm-twofactor.admin.edit_group.2fa_help"))),10)})),(0,n.extend)(d().prototype,"submitData",(function(t){return t.requires2FA=this.requires2FA(),t}))}))})(),module.exports=o})();
//# sourceMappingURL=admin.js.map