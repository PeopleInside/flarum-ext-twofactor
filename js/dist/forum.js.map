{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@ianm/twofactor/webpack/bootstrap","webpack://@ianm/twofactor/webpack/runtime/compat get default export","webpack://@ianm/twofactor/webpack/runtime/define property getters","webpack://@ianm/twofactor/webpack/runtime/hasOwnProperty shorthand","webpack://@ianm/twofactor/webpack/runtime/make namespace object","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/app']\"","webpack://@ianm/twofactor/./src/common/index.ts","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/app']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/extend']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/components/UserSecurityPage']\"","webpack://@ianm/twofactor/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@ianm/twofactor/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/Component']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Button']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@ianm/twofactor/./src/forum/components/TwoFactorGridItem.js","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@ianm/twofactor/./src/forum/components/TwoFactorEnableModal.js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorDisableConfirmModal .js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorGrid.js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorSettings.js","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@ianm/twofactor/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/extenders']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/models/Group']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/models/User']\"","webpack://@ianm/twofactor/./src/common/extend.ts","webpack://@ianm/twofactor/./src/forum/extend.ts","webpack://@ianm/twofactor/./src/forum/index.ts","webpack://@ianm/twofactor/./src/forum/extendUserSecurityPage.js","webpack://@ianm/twofactor/./src/forum/extendLogInModal.js","webpack://@ianm/twofactor/./src/forum/extendForumApplication.js","webpack://@ianm/twofactor/./src/forum/alertTwoFactorAuthentication.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('ianm/twofactor', () => {});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserSecurityPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class TwoFactorGridItem extends Component {\n  view() {\n    const { icon: iconName, title, value, action, helpText } = this.attrs;\n\n    return (\n      <li className=\"TwoFactorGrid-item\">\n        <span className=\"TwoFactorGrid-icon\">{icon(iconName)}</span>\n        <div className=\"TwoFactorGrid-content\">\n          <span className=\"TwoFactorGrid-title\">{title}</span>\n          <span className=\"TwoFactorGrid-value\">{value}</span>\n          {helpText && <span className=\"helpText TwoFactorGrid-helpText\">{helpText}</span>}\n        </div>\n        {action && <span className=\"TwoFactorGrid-actions\">{action}</span>}\n      </li>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class TwoFactorEnableModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n    // Statuses: 'loading', 'displayQR', 'displayBackupCodes', 'final'\n    this.status = 'loading';\n    this.qrCodeUrl = null;\n    this.backupCodes = [];\n    this.token = Stream('');\n    this.code = null;\n    this.activeTab = 'qrcode';\n  }\n\n  className() {\n    return 'TwoFactorEnableModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('ianm-twofactor.forum.security.two_factor_heading');\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const userId = this.user.id();\n    app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + `/users/${userId}/twofactor/qrcode`,\n      })\n      .then((response) => {\n        this.qrCodeUrl = response.svg;\n        this.code = response.code;\n        this.status = 'displayQR';\n        m.redraw();\n      });\n  }\n\n  onupdate() {\n    const tokenInput = document.querySelector('.TwoFactorEnableModal [name=token]');\n    if (tokenInput && document.activeElement !== tokenInput) {\n      tokenInput.focus();\n    }\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        {this.status === 'loading' && (\n          <div className=\"loading\">\n            <LoadingIndicator />\n            <p>{app.translator.trans('ianm-twofactor.forum.security.loading_qr')}</p>\n          </div>\n        )}\n\n        {this.status === 'displayQR' && (\n          <div>\n            <div className=\"tabs\">\n              <Button\n                className={this.activeTab === 'qrcode' ? 'active' : ''}\n                onclick={() => {\n                  this.activeTab = 'qrcode';\n                  m.redraw();\n                }}\n              >\n                {app.translator.trans('ianm-twofactor.forum.security.qr_tab')}\n              </Button>\n              <Button\n                className={this.activeTab === 'manual' ? 'active' : ''}\n                onclick={() => {\n                  this.activeTab = 'manual';\n                  m.redraw();\n                }}\n              >\n                {app.translator.trans('ianm-twofactor.forum.security.manual_tab')}\n              </Button>\n            </div>\n\n            {this.activeTab === 'qrcode' && (\n              <div className=\"qrSection\">\n                <img className=\"qrImage\" src={this.qrCodeUrl} alt={app.translator.trans('ianm-twofactor.forum.security.qr_code_alt')} />\n                <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.scan_qr_instruction')}</p>\n              </div>\n            )}\n\n            {this.activeTab === 'manual' && (\n              <div className=\"manualEntrySection\">\n                <code className=\"manualEntryCode\">{this.code}</code>\n                <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.manual_entry_instruction')}</p>\n              </div>\n            )}\n\n            <div className=\"Form\">\n              <form onsubmit={this.onSubmit.bind(this)}>\n                <div className=\"Form-group\">\n                  <input\n                    className=\"FormControl\"\n                    name=\"token\"\n                    bidi={this.token}\n                    placeholder={app.translator.trans('ianm-twofactor.forum.security.enter_token')}\n                  />\n                </div>\n                <div className=\"Form-group\">\n                  <Button type=\"submit\" className=\"Button Button--primary\" onclick={this.verifyToken.bind(this)}>\n                    {app.translator.trans('ianm-twofactor.forum.security.verify_button')}\n                  </Button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {this.status === 'displayBackupCodes' && (\n          <div>\n            <p>{app.translator.trans('ianm-twofactor.forum.security.backup_codes')}</p>\n            <ul>\n              {this.backupCodes.map((code) => (\n                <li>\n                  <code>{code}</code>\n                </li>\n              ))}\n            </ul>\n            <p>{app.translator.trans('ianm-twofactor.forum.security.backup_codes_instruction')}</p>\n            <Button\n              className=\"Button Button--primary\"\n              onclick={() => {\n                this.status = 'final';\n                m.redraw();\n              }}\n            >\n              {app.translator.trans('ianm-twofactor.forum.security.saved_backup_codes_button')}\n            </Button>\n          </div>\n        )}\n\n        {this.status === 'final' && (\n          <div>\n            <p>{app.translator.trans('ianm-twofactor.forum.security.two_factor_enabled_confirmation')}</p>\n            <Button className=\"Button Button--primary\" onclick={this.finish.bind(this)}>\n              {app.translator.trans('ianm-twofactor.forum.security.ok_button')}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  verifyToken() {\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/users/twofactor/verify',\n        body: {\n          token: this.token(),\n        },\n      })\n      .then((response) => {\n        this.backupCodes = response.backupCodes;\n        this.status = 'displayBackupCodes';\n        this.user.twoFactorEnabled(true);\n        m.redraw();\n      })\n      .catch((error) => {\n        //alert('Verification failed. Please try again.');\n        //error.alert.content = 'Verification failed. Please try again.';\n      });\n  }\n\n  finish() {\n    this.attrs.onEnabled();\n    this.hide();\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    this.verifyToken();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class TwoFactorDisableConfirmModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = false;\n  }\n\n  className() {\n    return 'TwoFactorDisableConfirmModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('ianm-twofactor.forum.security.confirm_disable_2fa_title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>{app.translator.trans('ianm-twofactor.forum.security.confirm_disable_2fa_text')}</p>\n        <div className=\"Form-group\">\n          <Button className=\"Button Button--danger\" onclick={this.disable.bind(this)} loading={this.loading}>\n            {app.translator.trans('ianm-twofactor.forum.security.disable_2fa_button')}\n          </Button>\n          <Button className=\"Button Button--cancel\" onclick={this.hide.bind(this)}>\n            {app.translator.trans('ianm-twofactor.forum.security.cancel_button')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  disable() {\n    this.loading = true;\n    const userId = this.attrs.user.id();\n\n    app\n      .request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + `/users/${userId}/twofactor/disable`,\n      })\n      .then(() => {\n        this.loading = false;\n        this.attrs.onDisabled();\n        this.hide();\n      })\n      .catch((error) => {\n        // Handle any errors.\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport TwoFactorGridItem from './TwoFactorGridItem';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport TwoFactorEnableModal from './TwoFactorEnableModal';\nimport TwoFactorDisableConfirmModal from './TwoFactorDisableConfirmModal ';\n\nexport default class TwoFactorGrid extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n    this.twoFactorEnabled = this.user.twoFactorEnabled();\n    this.canDisableTwoFactor = this.user.canDisable2FA();\n    this.backupCodesRemaining = this.user.backupCodesRemaining() || 0;\n  }\n\n  view() {\n    return (\n      <div className=\"TwoFactorGrid\">\n        <ul>{listItems(this.twoFactorItems().toArray())}</ul>\n      </div>\n    );\n  }\n\n  twoFactorItems() {\n    const items = new ItemList();\n\n    const disableAction = this.getDisableAction();\n    const enableAction = (\n      <Button className=\"Button Button--primary\" onclick={this.enableTwoFactor.bind(this)}>\n        {app.translator.trans('ianm-twofactor.forum.security.enable_2fa_button')}\n      </Button>\n    );\n\n    items.add(\n      'status',\n      <TwoFactorGridItem\n        icon=\"fas fa-shield-alt\"\n        title={app.translator.trans('ianm-twofactor.forum.security.two_factor_title')}\n        value={\n          this.twoFactorEnabled\n            ? app.translator.trans('ianm-twofactor.forum.security.two_factor_enabled')\n            : app.translator.trans('ianm-twofactor.forum.security.two_factor_disabled')\n        }\n        action={this.twoFactorEnabled ? disableAction : enableAction}\n        helpText={!this.canDisableTwoFactor && app.translator.trans('ianm-twofactor.forum.security.cannot_disable')}\n      />\n    );\n\n    // Only continue to add other items if Two Factor Authentication is enabled\n    if (!this.twoFactorEnabled) return items;\n\n    items.add(\n      'backupCodes',\n      <TwoFactorGridItem\n        icon=\"fas fa-key\"\n        title={app.translator.trans('ianm-twofactor.forum.security.backup_codes_remaining')}\n        value={this.backupCodesRemaining}\n        // action={\n        //   this.backupCodesRemaining < 2 ? (\n        //     <Button className=\"Button Button--primary\" onclick={this.generateBackupCodes.bind(this)}>\n        //       {app.translator.trans('ianm-twofactor.forum.security.generate_backup_codes_button')}\n        //     </Button>\n        //   ) : null\n        // }\n      />\n    );\n\n    // Add other items as needed\n\n    return items;\n  }\n\n  getDisableAction() {\n    const disableButton = (\n      <Button className=\"Button Button--danger\" onclick={this.disableTwoFactor.bind(this)} disabled={!this.canDisableTwoFactor}>\n        {app.translator.trans('ianm-twofactor.forum.security.disable_2fa_button')}\n      </Button>\n    );\n\n    return !this.canDisableTwoFactor ? (\n      <Tooltip text={app.translator.trans('ianm-twofactor.forum.security.cannot_disable_tooltip')}>{disableButton}</Tooltip>\n    ) : (\n      disableButton\n    );\n  }\n\n  enableTwoFactor() {\n    app.modal.show(TwoFactorEnableModal, { onEnabled: this.onTwoFactorEnabled.bind(this), user: this.user });\n  }\n\n  onTwoFactorEnabled() {\n    this.twoFactorEnabled = true;\n    m.redraw();\n  }\n\n  disableTwoFactor() {\n    app.modal.show(TwoFactorDisableConfirmModal, { onDisabled: this.onTwoFactorDisabled.bind(this), user: this.user });\n  }\n\n  onTwoFactorDisabled() {\n    this.twoFactorEnabled = false;\n    m.redraw();\n  }\n\n  generateBackupCodes() {\n    // Logic to generate more backup codes\n    // Update this.backupCodesRemaining accordingly\n    m.redraw();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport TwoFactorGrid from './TwoFactorGrid';\n\nexport default class TwoFactorSettings extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.twoFactorEnabled = this.attrs.user.twoFactorEnabled();\n    this.canDisableTwoFactor = this.attrs.user.canDisable2FA();\n    this.loading = false;\n  }\n\n  view() {\n    return (\n      <div>\n        <TwoFactorGrid user={this.attrs.user} />\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/ForumApplication'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Group'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","import Extend from 'flarum/common/extenders';\nimport Group from 'flarum/common/models/Group';\nimport User from 'flarum/common/models/User';\n\nexport default [\n  new Extend.Model(User) //\n    .attribute<boolean>('twoFactorEnabled')\n    .attribute<boolean>('canDisable2FA')\n    .attribute<boolean>('mustEnable2FA')\n    .attribute<number>('backupCodesRemaining'),\n\n  new Extend.Model(Group) //\n    .attribute<boolean>('requires2FA'),\n];\n","import commonExtend from '../common/extend';\n\nexport default [...commonExtend];\n","import app from 'flarum/forum/app';\nimport extendUserSecurityPage from './extendUserSecurityPage';\nimport extendLogInModal from './extendLogInModal';\nimport extendForumApplication from './extendForumApplication';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('ianm/twofactor', () => {\n  extendUserSecurityPage();\n  extendLogInModal();\n  extendForumApplication();\n});\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserSecurityPage from 'flarum/forum/components/UserSecurityPage';\nimport TwoFactorSettings from './components/TwoFactorSettings';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function extendUserSecurityPage() {\n  extend(UserSecurityPage.prototype, 'settingsItems', function (items) {\n    items.add(\n      'twoFactor',\n      <FieldSet label={app.translator.trans('ianm-twofactor.forum.security.two_factor_heading')}>\n        <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.two_factor_help')}</p>\n        <p className=\"helpText\">\n          {app.translator.trans('ianm-twofactor.forum.security.two_factor_apps', {\n            google: (\n              <LinkButton\n                external={true}\n                href=\"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Google Authenticator\n              </LinkButton>\n            ),\n            microsoft: (\n              <LinkButton external={true} href=\"https://www.microsoft.com/en-us/account/authenticator\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Microsoft Authenticator\n              </LinkButton>\n            ),\n            authy: (\n              <LinkButton external={true} href=\"https://authy.com/download/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Authy\n              </LinkButton>\n            ),\n          })}\n        </p>\n        <TwoFactorSettings user={this.user} />\n      </FieldSet>,\n      100\n    );\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default function extendLogInModal() {\n  extend(LogInModal.prototype, 'oninit', function (vnode) {\n    // Initialize the 2FA token stream\n    this.twoFactorToken = Stream('');\n    this.twoFactorRequired = false;\n  });\n\n  extend(LogInModal.prototype, 'fields', function (items) {\n    // Add the 2FA input field to the form\n    if (this.twoFactorRequired) {\n      items.add(\n        'twoFactor',\n        <div className=\"Form-group TwoFactorInput\">\n          <legend>{app.translator.trans('ianm-twofactor.forum.log_in.two_factor_required_message')}</legend>\n          <input\n            className=\"FormControl\"\n            name=\"twoFactorToken\"\n            type=\"text\"\n            placeholder={app.translator.trans('ianm-twofactor.forum.log_in.two_factor_placeholder')}\n            value={this.twoFactorToken()}\n            disabled={this.loading}\n            oninput={(e) => {\n              this.twoFactorToken(e.currentTarget.value);\n\n              if (e.target.value.length === 6) {\n                this.onsubmit(new Event('submit')); // Trigger the onsubmit method\n              }\n            }}\n          />\n        </div>,\n        19\n      );\n\n      items.remove('identification');\n      items.remove('password');\n      items.remove('remember');\n    }\n  });\n\n  extend(LogInModal.prototype, 'loginParams', function (data) {\n    // Add the twoFactorToken to the login params\n    data.twoFactorToken = this.twoFactorToken();\n\n    return data;\n  });\n\n  override(LogInModal.prototype, 'body', function (original) {\n    if (this.twoFactorRequired) {\n      return <div className=\"Form Form--centered\">{this.fields().toArray()}</div>;\n    }\n\n    return original();\n  });\n\n  override(LogInModal.prototype, 'footer', function (original) {\n    if (this.twoFactorRequired) {\n      return null;\n    }\n\n    return original();\n  });\n\n  override(LogInModal.prototype, 'onerror', function (original, error) {\n    if (error.status === 422) {\n      const errors = error.response && error.response.errors;\n      const firstErrorDetail = (errors && errors[0] && errors[0].detail) || '';\n\n      if (firstErrorDetail.includes('two_factor_required')) {\n        // If the error indicates that 2FA is required, show the 2FA input field\n        this.twoFactorRequired = true;\n      } else {\n        // Handle other types of 422 errors here\n        error.alert.content = app.translator.trans('core.forum.log_in.invalid_login_message');\n        this.alertAttrs = error.alert;\n      }\n      m.redraw();\n      this.onready();\n    } else {\n      original(error);\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport ForumApplication from 'flarum/forum/ForumApplication';\nimport alertTwoFactorAuthentication from './alertTwoFactorAuthentication';\n\nexport default function extendForumApplication() {\n  extend(ForumApplication.prototype, 'mount', function () {\n    alertTwoFactorAuthentication(app);\n  });\n}\n","import Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport Component from 'flarum/common/Component';\nimport TwoFactorEnableModal from './components/TwoFactorEnableModal';\n\n/**\n * Shows an alert if the user has not enabled 2FA.\n *\n * @param {import('../ForumApplication').default} app\n */\nexport default function alertTwoFactorAuthentication(app) {\n  const user = app.session.user;\n\n  if (!user || !user.mustEnable2FA()) return;\n\n  class Enable2FAButton extends Component {\n    view() {\n      return (\n        <Button className=\"Button Button--link\" onclick={this.onclick.bind(this)} icon=\"fas fa-shield-alt\">\n          {app.translator.trans('ianm-twofactor.forum.security.enable_2fa_button')}\n        </Button>\n      );\n    }\n\n    onclick() {\n      app.modal.show(TwoFactorEnableModal, { onEnabled: this.onTwoFactorEnabled.bind(this), user });\n    }\n\n    onTwoFactorEnabled() {\n      user.mustEnable2FA(false);\n      m.redraw();\n\n      // Unmount the ContainedAlert\n      m.mount(alertContainer, null);\n    }\n  }\n\n  class ContainedAlert extends Alert {\n    view(vnode) {\n      const vdom = super.view(vnode);\n      return { ...vdom, children: [<div className=\"container\">{vdom.children}</div>] };\n    }\n  }\n\n  const alertContainer = $('<div className=\"App-notices\"/>').insertBefore('#content')[0];\n\n  m.mount(alertContainer, {\n    view: () => (\n      <ContainedAlert dismissible={false} controls={[<Enable2FAButton />]} className=\"Alert--2faEnable\">\n        {app.translator.trans('ianm-twofactor.forum.user_2fa.alert_message')}\n      </ContainedAlert>\n    ),\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","TwoFactorGridItem","_Component","apply","arguments","view","_this$attrs","this","attrs","iconName","icon","title","action","helpText","m","className","Component","TwoFactorEnableModal","_Modal","_proto","oninit","vnode","user","status","qrCodeUrl","backupCodes","token","Stream","code","activeTab","trans","oncreate","_this","userId","id","method","url","attribute","then","response","svg","redraw","onupdate","tokenInput","document","querySelector","activeElement","focus","content","_this2","LoadingIndicator","Button","onclick","src","alt","onsubmit","onSubmit","name","bidi","placeholder","type","verifyToken","map","finish","_this3","body","twoFactorEnabled","error","onEnabled","hide","e","preventDefault","Modal","TwoFactorDisableConfirmModal","loading","disable","onDisabled","TwoFactorGrid","canDisableTwoFactor","canDisable2FA","backupCodesRemaining","listItems","twoFactorItems","toArray","items","ItemList","disableAction","getDisableAction","enableAction","enableTwoFactor","disableButton","disableTwoFactor","disabled","Tooltip","text","show","onTwoFactorEnabled","onTwoFactorDisabled","generateBackupCodes","TwoFactorSettings","_extends","assign","target","i","length","source","Extend","User","Group","concat","commonExtend","extend","UserSecurityPage","FieldSet","label","google","LinkButton","external","href","rel","microsoft","authy","LogInModal","twoFactorToken","twoFactorRequired","oninput","currentTarget","Event","remove","data","override","original","fields","errors","detail","includes","alert","alertAttrs","onready","ForumApplication","session","mustEnable2FA","Enable2FAButton","translator","modal","mount","alertContainer","ContainedAlert","_Alert","vdom","children","Alert","$","insertBefore","dismissible","controls","alertTwoFactorAuthentication"],"sourceRoot":""}