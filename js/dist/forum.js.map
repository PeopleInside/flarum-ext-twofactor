{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@ianm/twofactor/./src/common/extend.ts","webpack://@ianm/twofactor/./src/common/index.ts","webpack://@ianm/twofactor/./src/forum/alertTwoFactorAuthentication.js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorDisableConfirmModal .js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorEnableModal.js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorGrid.js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorGridItem.js","webpack://@ianm/twofactor/./src/forum/components/TwoFactorSettings.js","webpack://@ianm/twofactor/./src/forum/extend.ts","webpack://@ianm/twofactor/./src/forum/extendForumApplication.js","webpack://@ianm/twofactor/./src/forum/extendLogInModal.js","webpack://@ianm/twofactor/./src/forum/extendUserSecurityPage.js","webpack://@ianm/twofactor/./src/forum/index.ts","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/Component']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/app']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Button']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/extend']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/extenders']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/models/Group']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/models/User']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/app']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@ianm/twofactor/external root \"flarum.core.compat['forum/components/UserSecurityPage']\"","webpack://@ianm/twofactor/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@ianm/twofactor/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@ianm/twofactor/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@ianm/twofactor/webpack/bootstrap","webpack://@ianm/twofactor/webpack/runtime/compat get default export","webpack://@ianm/twofactor/webpack/runtime/define property getters","webpack://@ianm/twofactor/webpack/runtime/hasOwnProperty shorthand","webpack://@ianm/twofactor/webpack/runtime/make namespace object","webpack://@ianm/twofactor/./forum.ts"],"sourcesContent":["import Extend from 'flarum/common/extenders';\nimport Group from 'flarum/common/models/Group';\nimport User from 'flarum/common/models/User';\n\nexport default [\n  new Extend.Model(User) //\n    .attribute<boolean>('twoFactorEnabled')\n    .attribute<boolean>('canDisable2FA')\n    .attribute<boolean>('mustEnable2FA')\n    .attribute<number>('backupCodesRemaining'),\n\n  new Extend.Model(Group) //\n    .attribute<boolean>('requires2FA'),\n];\n","import app from 'flarum/common/app';\n\napp.initializers.add('ianm/twofactor', () => {});\n","import Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport Component from 'flarum/common/Component';\nimport TwoFactorEnableModal from './components/TwoFactorEnableModal';\n\n/**\n * Shows an alert if the user has not enabled 2FA.\n *\n * @param {import('../ForumApplication').default} app\n */\nexport default function alertTwoFactorAuthentication(app) {\n  const user = app.session.user;\n\n  if (!user || !user.mustEnable2FA()) return;\n\n  class Enable2FAButton extends Component {\n    view() {\n      return (\n        <Button className=\"Button Button--link\" onclick={this.onclick.bind(this)} icon=\"fas fa-shield-alt\">\n          {app.translator.trans('ianm-twofactor.forum.security.enable_2fa_button')}\n        </Button>\n      );\n    }\n\n    onclick() {\n      app.modal.show(TwoFactorEnableModal, { user });\n    }\n  }\n\n  class ContainedAlert extends Alert {\n    view(vnode) {\n      const vdom = super.view(vnode);\n      return { ...vdom, children: [<div className=\"container\">{vdom.children}</div>] };\n    }\n  }\n\n  m.mount($('<div className=\"App-notices\"/>').insertBefore('#content')[0], {\n    view: () => (\n      <ContainedAlert dismissible={false} controls={[<Enable2FAButton />]} className=\"Alert--2faEnable\">\n        {app.translator.trans('ianm-twofactor.forum.user_2fa.alert_message')}\n      </ContainedAlert>\n    ),\n  });\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class TwoFactorDisableConfirmModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = false;\n  }\n\n  className() {\n    return 'TwoFactorDisableConfirmModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('ianm-twofactor.forum.security.confirm_disable_2fa_title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>{app.translator.trans('ianm-twofactor.forum.security.confirm_disable_2fa_text')}</p>\n        <div className=\"Form-group\">\n          <Button className=\"Button Button--danger\" onclick={this.disable.bind(this)} loading={this.loading}>\n            {app.translator.trans('ianm-twofactor.forum.security.disable_2fa_button')}\n          </Button>\n          <Button className=\"Button Button--cancel\" onclick={this.hide.bind(this)}>\n            {app.translator.trans('ianm-twofactor.forum.security.cancel_button')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  disable() {\n    this.loading = true;\n    const userId = this.attrs.user.id();\n\n    app\n      .request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + `/users/${userId}/twofactor/disable`,\n      })\n      .then(() => {\n        this.loading = false;\n        this.attrs.onDisabled();\n        this.hide();\n      })\n      .catch((error) => {\n        // Handle any errors.\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class TwoFactorEnableModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n    // Statuses: 'loading', 'displayQR', 'displayBackupCodes', 'final'\n    this.status = 'loading';\n    this.qrCodeUrl = null;\n    this.backupCodes = [];\n    this.token = Stream('');\n    this.code = null;\n    this.activeTab = 'qrcode';\n  }\n\n  className() {\n    return 'TwoFactorEnableModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('ianm-twofactor.forum.security.two_factor_heading');\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const userId = this.user.id();\n    app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + `/users/${userId}/twofactor/qrcode`,\n      })\n      .then((response) => {\n        this.qrCodeUrl = response.svg;\n        this.code = response.code;\n        this.status = 'displayQR';\n        m.redraw();\n      });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        {this.status === 'loading' && (\n          <div className=\"loading\">\n            <LoadingIndicator />\n            <p>{app.translator.trans('ianm-twofactor.forum.security.loading_qr')}</p>\n          </div>\n        )}\n\n        {this.status === 'displayQR' && (\n          <div>\n            <div className=\"tabs\">\n              <Button\n                className={this.activeTab === 'qrcode' ? 'active' : ''}\n                onclick={() => {\n                  this.activeTab = 'qrcode';\n                  m.redraw();\n                }}\n              >\n                {app.translator.trans('ianm-twofactor.forum.security.qr_tab')}\n              </Button>\n              <Button\n                className={this.activeTab === 'manual' ? 'active' : ''}\n                onclick={() => {\n                  this.activeTab = 'manual';\n                  m.redraw();\n                }}\n              >\n                {app.translator.trans('ianm-twofactor.forum.security.manual_tab')}\n              </Button>\n            </div>\n\n            {this.activeTab === 'qrcode' && (\n              <div className=\"qrSection\">\n                <img src={this.qrCodeUrl} alt={app.translator.trans('ianm-twofactor.forum.security.qr_code_alt')} />\n                <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.scan_qr_instruction')}</p>\n              </div>\n            )}\n\n            {this.activeTab === 'manual' && (\n              <div className=\"manualEntrySection\">\n                <code className=\"manualEntryCode\">{this.code}</code>\n                <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.manual_entry_instruction')}</p>\n              </div>\n            )}\n\n            <div className=\"Form\">\n              <div className=\"Form-group\">\n                <input className=\"FormControl\" bidi={this.token} placeholder={app.translator.trans('ianm-twofactor.forum.security.enter_token')} />\n              </div>\n              <div className=\"Form-group\">\n                <Button className=\"Button Button--primary\" onclick={this.verifyToken.bind(this)}>\n                  {app.translator.trans('ianm-twofactor.forum.security.verify_button')}\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {this.status === 'displayBackupCodes' && (\n          <div>\n            <p>{app.translator.trans('ianm-twofactor.forum.security.backup_codes')}</p>\n            <ul>\n              {this.backupCodes.map((code) => (\n                <li>\n                  <code>{code}</code>\n                </li>\n              ))}\n            </ul>\n            <p>{app.translator.trans('ianm-twofactor.forum.security.backup_codes_instruction')}</p>\n            <Button\n              className=\"Button Button--primary\"\n              onclick={() => {\n                this.status = 'final';\n                m.redraw();\n              }}\n            >\n              {app.translator.trans('ianm-twofactor.forum.security.saved_backup_codes_button')}\n            </Button>\n          </div>\n        )}\n\n        {this.status === 'final' && (\n          <div>\n            <p>{app.translator.trans('ianm-twofactor.forum.security.two_factor_enabled_confirmation')}</p>\n            <Button className=\"Button Button--primary\" onclick={this.finish.bind(this)}>\n              {app.translator.trans('ianm-twofactor.forum.security.ok_button')}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  verifyToken() {\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/users/twofactor/verify',\n        body: {\n          token: this.token(),\n        },\n      })\n      .then((response) => {\n        this.backupCodes = response.backupCodes;\n        this.status = 'displayBackupCodes';\n        this.user.twoFactorEnabled(true);\n        m.redraw();\n      })\n      .catch((error) => {\n        alert('Verification failed. Please try again.');\n      });\n  }\n\n  finish() {\n    this.attrs.onEnabled();\n    this.hide();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport TwoFactorGridItem from './TwoFactorGridItem';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport TwoFactorEnableModal from './TwoFactorEnableModal';\nimport TwoFactorDisableConfirmModal from './TwoFactorDisableConfirmModal ';\n\nexport default class TwoFactorGrid extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n    this.twoFactorEnabled = this.user.twoFactorEnabled();\n    this.canDisableTwoFactor = this.user.canDisable2FA();\n    this.backupCodesRemaining = this.user.backupCodesRemaining() || 0;\n  }\n\n  view() {\n    return (\n      <div className=\"TwoFactorGrid\">\n        <ul>{listItems(this.twoFactorItems().toArray())}</ul>\n      </div>\n    );\n  }\n\n  twoFactorItems() {\n    const items = new ItemList();\n\n    const disableAction = this.getDisableAction();\n    const enableAction = (\n      <Button className=\"Button Button--primary\" onclick={this.enableTwoFactor.bind(this)}>\n        {app.translator.trans('ianm-twofactor.forum.security.enable_2fa_button')}\n      </Button>\n    );\n\n    items.add(\n      'status',\n      <TwoFactorGridItem\n        icon=\"fas fa-shield-alt\"\n        title={app.translator.trans('ianm-twofactor.forum.security.two_factor_title')}\n        value={\n          this.twoFactorEnabled\n            ? app.translator.trans('ianm-twofactor.forum.security.two_factor_enabled')\n            : app.translator.trans('ianm-twofactor.forum.security.two_factor_disabled')\n        }\n        action={this.twoFactorEnabled ? disableAction : enableAction}\n        helpText={!this.canDisableTwoFactor && app.translator.trans('ianm-twofactor.forum.security.cannot_disable')}\n      />\n    );\n\n    // Only continue to add other items if Two Factor Authentication is enabled\n    if (!this.twoFactorEnabled) return items;\n\n    items.add(\n      'backupCodes',\n      <TwoFactorGridItem\n        icon=\"fas fa-key\"\n        title=\"Backup Codes Remaining:\"\n        value={this.backupCodesRemaining}\n        // action={\n        //   this.backupCodesRemaining < 2 ? (\n        //     <Button className=\"Button Button--primary\" onclick={this.generateBackupCodes.bind(this)}>\n        //       Generate More\n        //     </Button>\n        //   ) : null\n        // }\n      />\n    );\n\n    // Add other items as needed\n\n    return items;\n  }\n\n  getDisableAction() {\n    const disableButton = (\n      <Button className=\"Button Button--danger\" onclick={this.disableTwoFactor.bind(this)} disabled={!this.canDisableTwoFactor}>\n        {app.translator.trans('ianm-twofactor.forum.security.disable_2fa_button')}\n      </Button>\n    );\n\n    return !this.canDisableTwoFactor ? (\n      <Tooltip text={app.translator.trans('ianm-twofactor.forum.security.cannot_disable_tooltip')}>{disableButton}</Tooltip>\n    ) : (\n      disableButton\n    );\n  }\n\n  enableTwoFactor() {\n    app.modal.show(TwoFactorEnableModal, { onEnabled: this.onTwoFactorEnabled.bind(this), user: this.user });\n  }\n\n  onTwoFactorEnabled() {\n    this.twoFactorEnabled = true;\n    m.redraw();\n  }\n\n  disableTwoFactor() {\n    app.modal.show(TwoFactorDisableConfirmModal, { onDisabled: this.onTwoFactorDisabled.bind(this), user: this.user });\n  }\n\n  onTwoFactorDisabled() {\n    this.twoFactorEnabled = false;\n    m.redraw();\n  }\n\n  generateBackupCodes() {\n    // Logic to generate more backup codes\n    // Update this.backupCodesRemaining accordingly\n    m.redraw();\n  }\n}\n","import Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class TwoFactorGridItem extends Component {\n  view() {\n    const { icon: iconName, title, value, action, helpText } = this.attrs;\n\n    return (\n      <li className=\"TwoFactorGrid-item\">\n        <span className=\"TwoFactorGrid-icon\">{icon(iconName)}</span>\n        <div className=\"TwoFactorGrid-content\">\n          <span className=\"TwoFactorGrid-title\">{title}</span>\n          <span className=\"TwoFactorGrid-value\">{value}</span>\n          {helpText && <span className=\"helpText TwoFactorGrid-helpText\">{helpText}</span>}\n        </div>\n        {action && <span className=\"TwoFactorGrid-actions\">{action}</span>}\n      </li>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport TwoFactorEnableModal from './TwoFactorEnableModal';\nimport TwoFactorDisableConfirmModal from './TwoFactorDisableConfirmModal ';\nimport TwoFactorGrid from './TwoFactorGrid';\n\nexport default class TwoFactorSettings extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.twoFactorEnabled = this.attrs.user.twoFactorEnabled();\n    this.canDisableTwoFactor = this.attrs.user.canDisable2FA();\n    this.loading = false;\n  }\n\n  view() {\n    return (\n      // <div className=\"TwoFactorSettings\">\n      //   <div className=\"Form-group\">\n      //     {this.twoFactorEnabled ? (\n      //       <div>\n      //         <p>{app.translator.trans('ianm-twofactor.forum.security.two_factor_enabled')}</p>\n      //         <Button className=\"Button Button--danger\" onclick={this.disableTwoFactor.bind(this)} disabled={!this.canDisableTwoFactor}>\n      //           {app.translator.trans('ianm-twofactor.forum.security.disable_2fa_button')}\n      //         </Button>\n      //         {!this.canDisableTwoFactor && <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.cannot_disable')}</p>}\n      //       </div>\n      //     ) : (\n      //       <div>\n      //         <p>{app.translator.trans('ianm-twofactor.forum.security.two_factor_disabled')}</p>\n      //         <Button className=\"Button Button--primary Button--2fa\" onclick={this.enableTwoFactor.bind(this)} icon=\"fas fa-shield-alt\">\n      //           {app.translator.trans('ianm-twofactor.forum.security.enable_2fa_button')}\n      //         </Button>\n      //       </div>\n      //     )}\n      //   </div>\n      // </div>,\n      <div>\n        <TwoFactorGrid user={this.attrs.user} />\n      </div>\n    );\n  }\n}\n","import commonExtend from '../common/extend';\n\nexport default [...commonExtend];\n","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport ForumApplication from 'flarum/forum/ForumApplication';\nimport alertTwoFactorAuthentication from './alertTwoFactorAuthentication';\n\nexport default function extendForumApplication() {\n  extend(ForumApplication.prototype, 'mount', function () {\n    alertTwoFactorAuthentication(app);\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default function extendLogInModal() {\n  extend(LogInModal.prototype, 'oninit', function (vnode) {\n    // Initialize the 2FA token stream\n    this.twoFactorToken = Stream('');\n    this.twoFactorRequired = false;\n  });\n\n  extend(LogInModal.prototype, 'fields', function (items) {\n    // Add the 2FA input field to the form\n    if (this.twoFactorRequired) {\n      items.add(\n        'twoFactor',\n        <div className=\"Form-group TwoFactorInput\">\n          <input\n            className=\"FormControl\"\n            name=\"twoFactorToken\"\n            type=\"text\"\n            placeholder={app.translator.trans('ianm-twofactor.forum.log_in.two_factor_placeholder')}\n            bidi={this.twoFactorToken}\n            disabled={this.loading}\n          />\n        </div>,\n        19\n      );\n\n      items.remove('identification');\n      items.remove('password');\n      items.remove('remember');\n    }\n  });\n\n  extend(LogInModal.prototype, 'loginParams', function (data) {\n    // Add the twoFactorToken to the login params\n    data.twoFactorToken = this.twoFactorToken();\n\n    return data;\n  });\n\n  override(LogInModal.prototype, 'onerror', function (original, error) {\n    if (error.status === 401) {\n      const errors = error.response && error.response.errors;\n      const firstErrorDetail = (errors && errors[0] && errors[0].detail) || '';\n\n      if (firstErrorDetail.includes('two_factor_required')) {\n        // If the error indicates that 2FA is required, show the 2FA input field\n        this.twoFactorRequired = true;\n        error.alert.content = app.translator.trans('ianm-twofactor.forum.log_in.two_factor_required_message');\n        this.alertAttrs = error.alert;\n      } else {\n        // Handle other types of 401 errors here\n        error.alert.content = app.translator.trans('core.forum.log_in.invalid_login_message');\n        this.alertAttrs = error.alert;\n      }\n      m.redraw();\n      this.onready();\n    } else {\n      original(error);\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserSecurityPage from 'flarum/forum/components/UserSecurityPage';\nimport TwoFactorSettings from './components/TwoFactorSettings';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function extendUserSecurityPage() {\n  extend(UserSecurityPage.prototype, 'settingsItems', function (items) {\n    items.add(\n      'twoFactor',\n      <FieldSet label={app.translator.trans('ianm-twofactor.forum.security.two_factor_heading')}>\n        <p className=\"helpText\">{app.translator.trans('ianm-twofactor.forum.security.two_factor_help')}</p>\n        <p className=\"helpText\">\n          {app.translator.trans('ianm-twofactor.forum.security.two_factor_apps', {\n            google: (\n              <LinkButton\n                external={true}\n                href=\"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Google Authenticator\n              </LinkButton>\n            ),\n            microsoft: (\n              <LinkButton external={true} href=\"https://www.microsoft.com/en-us/account/authenticator\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Microsoft Authenticator\n              </LinkButton>\n            ),\n            authy: (\n              <LinkButton external={true} href=\"https://authy.com/download/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Authy\n              </LinkButton>\n            ),\n          })}\n        </p>\n        <TwoFactorSettings user={this.user} />\n      </FieldSet>,\n      100\n    );\n  });\n}\n","import app from 'flarum/forum/app';\nimport extendUserSecurityPage from './extendUserSecurityPage';\nimport extendLogInModal from './extendLogInModal';\nimport extendForumApplication from './extendForumApplication';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('ianm/twofactor', () => {\n  extendUserSecurityPage();\n  extendLogInModal();\n  extendForumApplication();\n});\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/FieldSet'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/models/Group'];","module.exports = flarum.core.compat['common/models/User'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['forum/ForumApplication'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/LogInModal'];","module.exports = flarum.core.compat['forum/components/UserSecurityPage'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["Extend","Group","User","Model","attribute","app","initializers","add","Alert","Button","icon","Component","TwoFactorEnableModal","alertTwoFactorAuthentication","user","session","mustEnable2FA","Enable2FAButton","_Component","_inheritsLoose","apply","arguments","_proto","prototype","view","m","className","onclick","bind","translator","trans","modal","show","ContainedAlert","_Alert","_proto2","vnode","vdom","call","_extends","children","mount","$","insertBefore","dismissible","controls","Modal","TwoFactorDisableConfirmModal","_Modal","oninit","loading","title","content","disable","hide","_this","userId","attrs","id","request","method","url","forum","then","onDisabled","error","default","Stream","LoadingIndicator","status","qrCodeUrl","backupCodes","token","code","activeTab","oncreate","response","svg","redraw","_this2","src","alt","bidi","placeholder","verifyToken","map","finish","_this3","body","twoFactorEnabled","alert","onEnabled","ItemList","listItems","TwoFactorGridItem","Tooltip","TwoFactorGrid","canDisableTwoFactor","canDisable2FA","backupCodesRemaining","twoFactorItems","toArray","items","disableAction","getDisableAction","enableAction","enableTwoFactor","value","action","helpText","disableButton","disableTwoFactor","disabled","text","onTwoFactorEnabled","onTwoFactorDisabled","generateBackupCodes","_this$attrs","iconName","TwoFactorSettings","commonExtend","concat","extend","override","ForumApplication","extendForumApplication","LogInModal","extendLogInModal","twoFactorToken","twoFactorRequired","name","type","remove","data","original","errors","firstErrorDetail","detail","includes","alertAttrs","onready","UserSecurityPage","FieldSet","LinkButton","extendUserSecurityPage","label","google","external","href","target","rel","microsoft","authy","Object","assign","i","length","source","key","hasOwnProperty","setPrototypeOf","subClass","superClass","create","constructor","_setPrototypeOf","o","p","__proto__"],"sourceRoot":""}